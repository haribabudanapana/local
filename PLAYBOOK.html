<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playwright Framework Playbook</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: #333;
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1, h2, h3 {
            border-bottom: 1px solid #eaecef;
            padding-bottom: .3em;
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
        }
        code {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            background-color: #f6f8fa;
            padding: .2em .4em;
            margin: 0;
            font-size: 85%;
            border-radius: 3px;
        }
        pre {
            background-color: #f6f8fa;
            padding: 16px;
            overflow: auto;
            border-radius: 3px;
        }
        pre code {
            padding: 0;
            margin: 0;
            font-size: 100%;
            background-color: transparent;
            border: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .nav {
            position: fixed;
            left: 20px;
            top: 20px;
            background: #fff;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .nav li a {
            text-decoration: none;
            color: #0366d6;
            display: block;
            padding: 5px 0;
        }
        .comment {
            color: #2E8B57; /* SeaGreen */
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="nav">
        <h3>Navigation</h3>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#project-folder-structure">Folder Structure</a></li>
            <li><a href="#running-tests">Running Tests</a></li>
            <li><a href="#allure-report-commands">Allure Reports</a></li>
            <li><a href="#parallel-execution">Parallel Execution</a></li>
            <li><a href="#retry-mechanism">Retry Mechanism</a></li>
            <li><a href="#allure-results-cleanup">Allure Cleanup</a></li>
            <li><a href="#naming-conventions">Naming Conventions</a></li>
            <li><a href="#test-data-mapping-logic">Test Data Logic</a></li>
            <li><a href="#features-and-standards">Features & Standards</a></li>
        </ul>
    </div>

    <h1 id="introduction">üìò Playwright + TypeScript Test Automation Framework - User Playbook</h1>
    <p>This Playbook serves as a <strong>reference guide for QA engineers</strong> using the Playwright + TypeScript automation framework. It includes instructions on project setup, running tests, organizing test data, understanding naming conventions, and reading reports.</p>

    <hr>

    <h2 id="project-folder-structure">üìÇ Project Folder Structure</h2>
    <pre><code>ASTMAutomationFramework/
‚îÇ
‚îú‚îÄ‚îÄ tests/                     <span class="comment"># All spec/test files (e.g., login_INT-123.spec.ts)</span>
‚îÇ   ‚îî‚îÄ‚îÄ e2e/                   <span class="comment"># End-to-end test scripts</span>
‚îÇ
‚îú‚îÄ‚îÄ pages/                    <span class="comment"># Page Object Model (POM) classes (e.g., LoginPage.ts)</span>
‚îÇ
‚îú‚îÄ‚îÄ test-data/                <span class="comment"># JSON test data files per environment & JIRA ID</span>
‚îÇ
‚îú‚îÄ‚îÄ utils/                    <span class="comment"># Utility classes (e.g., testDataLoader.ts, allureHelper.ts)</span>
‚îÇ
‚îú‚îÄ‚îÄ .env.qa                   <span class="comment"># Environment-specific configs (QA)</span>
‚îú‚îÄ‚îÄ .env.dev                  <span class="comment"># Environment-specific configs (Dev)</span>
‚îú‚îÄ‚îÄ playwright.config.ts      <span class="comment"># Playwright configuration file</span>
‚îú‚îÄ‚îÄ package.json              <span class="comment"># Project dependencies and scripts</span>
‚îî‚îÄ‚îÄ tsconfig.json             <span class="comment"># TypeScript compiler configuration</span>
    </code></pre>

    <hr>

    <h2 id="running-tests">‚öôÔ∏è Running Tests</h2>
    <h3 id="run-all-qa">‚ñ∂Ô∏è Run All Tests in tests/e2e Folder for QA</h3>
    <pre><code>npx cross-env ENV=qa npx playwright test tests/e2e --retries=1</code></pre>
    <h3 id="run-all-dev">‚ñ∂Ô∏è Run All Tests in tests/e2e Folder for DEV</h3>
    <pre><code>npx cross-env ENV=dev npx playwright test tests/e2e --retries=1</code></pre>
    <h3 id="run-single-qa">üß™ Run Single Test File (QA)</h3>
    <pre><code>npx cross-env ENV=qa npx playwright test tests/e2e/login_INT-123.spec.ts</code></pre>

    <hr>

    <h2 id="allure-report-commands">üìà Allure Report Commands</h2>
    <h3 id="clean-and-run">1Ô∏è‚É£ Clean Old Results & Run Tests</h3>
    <pre><code>rd /s /q allure-results && npx cross-env ENV=qa npx playwright test tests/e2e --retries=1</code></pre>
    <h3 id="generate-report">2Ô∏è‚É£ Generate Allure Report</h3>
    <pre><code>npx allure generate ./allure-results --clean -o ./allure-report</code></pre>
    <h3 id="open-report">3Ô∏è‚É£ Open Allure Report</h3>
    <pre><code>npx allure open ./allure-report</code></pre>

    <hr>

    <h2 id="parallel-execution">üöÄ Parallel Execution (Playwright Default)</h2>
    <p>Playwright runs tests in parallel by default using workers. You can control this in <code>playwright.config.ts</code>:</p>
    <pre><code class="language-typescript">workers: 4 <span class="comment">// Customize based on CPU</span></code></pre>
    <p>Or override via CLI:</p>
    <pre><code>npx cross-env ENV=qa npx playwright test tests/e2e --workers=2</code></pre>

    <hr>

    <h2 id="retry-mechanism">üîÅ Retry Mechanism</h2>
    <p>Set in <code>playwright.config.ts</code>:</p>
    <pre><code class="language-typescript">retries: 1 <span class="comment">// Will retry failed tests once</span></code></pre>
    <p>Or override via CLI:</p>
    <pre><code>npx cross-env ENV=qa npx playwright test tests/e2e --retries=2</code></pre>

    <hr>

    <h2 id="allure-results-cleanup">üßπ Allure Results Cleanup</h2>
    <p>To avoid clutter from retries in reports, run:</p>
    <pre><code>rd /s /q allure-results && npx cross-env ENV=qa npx playwright test tests/e2e --retries=1</code></pre>
    <p>This deletes old results before each test run.</p>

    <hr>

    <h2 id="naming-conventions">üîç Naming Conventions</h2>
    <table>
        <thead>
            <tr>
                <th>Item</th>
                <th>Convention</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Test file</td>
                <td>feature_JIRAID.spec.ts</td>
                <td>login_INT-123.spec.ts</td>
            </tr>
            <tr>
                <td>Test data (QA)</td>
                <td>JIRAID.qa.json</td>
                <td>INT-123.qa.json</td>
            </tr>
            <tr>
                <td>Test data (Dev)</td>
                <td>JIRAID.dev.json</td>
                <td>INT-123.dev.json</td>
            </tr>
            <tr>
                <td>Environment variables</td>
                <td>.env.&lt;env&gt;</td>
                <td>.env.qa, .env.dev</td>
            </tr>
        </tbody>
    </table>

    <hr>

    <h2 id="test-data-mapping-logic">üìÑ Test Data Mapping Logic</h2>
    <p>Located in <code>testDataLoader.ts</code>:</p>
    <ul>
        <li>Extracts JIRA ID from test file name using regex.</li>
        <li>Loads environment-specific data from <code>/test-data/JIRAID.env.json</code></li>
    </ul>
    <p>Example:</p>
    <pre><code class="language-typescript"><span class="comment">// From login_INT-123.spec.ts</span>
<span class="comment">// Loads INT-123.qa.json when ENV=qa</span></code></pre>

    <hr>

    <h2 id="features-and-standards">üöÄ Features and Coding Standards</h2>
    <h3>Framework Features</h3>
    <ul>
        <li><strong>Page Object Model (POM):</strong> For clean, reusable, and maintainable code.</li>
        <li><strong>Data-Driven Testing:</strong> Test data is separated from test logic using JSON files.</li>
        <li><strong>Environment-Based Configuration:</strong> Easily switch between <code>dev</code> and <code>qa</code> environments.</li>
        <li><strong>Allure Reporting:</strong> Rich, interactive test reports with detailed steps and screenshots.</li>
        <li><strong>Parallel Execution:</strong> Tests run in parallel by default for faster execution.</li>
        <li><strong>Retry Mechanism:</strong> Automatically retries failed tests to reduce flakiness.</li>
    </ul>
    <h3>Coding Standards</h3>
    <ul>
        <li><strong>File Naming:</strong>
            <ul>
                <li>Test Files: <code>&lt;feature&gt;_&lt;JIRA_ID&gt;.spec.ts</code> (e.g., <code>login_INT-123.spec.ts</code>)</li>
                <li>Page Objects: <code>&lt;PageName&gt;Page.ts</code> (e.g., <code>LoginPage.ts</code>)</li>
                <li>Test Data: <code>&lt;JIRA_ID&gt;.&lt;env&gt;.json</code> (e.g., <code>INT-123.qa.json</code>)</li>
            </ul>
        </li>
        <li><strong>Indentation:</strong> Use 2 spaces for indentation.</li>
        <li><strong>Selectors:</strong> Prefer CSS selectors or <code>data-testid</code> attributes over XPath for better performance and readability.</li>
        <li><strong>Assertions:</strong> Use Playwright's <code>expect</code> for assertions.</li>
    </ul>

</body>
</html>